### chapter 10

#### 三种内存分配方法

<1>
自动分配内存，一个局域变量只在程序执行到该变量定义的时候才由系统自动分配内存给它，当包含该变量的定义的模块
结束时，该变量占用的内存自动释放。
```c++
int* invalid_pointer() {
    int x;       //紧急灾难！
    return &x;
}
```

<2>
静态分配，把x声明为静态变量就可以解决上述问题了。
```c++
int* invalid_pointer() {
    static int x; //合法写法
    return &x;
}
```

系统将对它进行一次而且只进行一次内存分配，之后直到程序结束之前，该变量的内存都不会被释放。
危机：

<3>
动态分配
T:类型
new T: 表达式将为一个T类型的对象分配内存，该变量由构造函数对其初始化，并且产生一个指向该新分配内存的对象的指针。
new T(args):可以给变量赋予一个特定的值。
new创建的对象一直存在，直到程序结束或者执行了delete p语句。

```
int* p = new int(42);

++ *p //p = 43

delete p; //该语句将*p对象占用的内存释放出来，p将是一个无效的指针
```

delete p: p是在new语句中返回的一个指针。指向一个用new语句分配内存的对象，或者是一个零指针。

T* p = new T[n]:
delete[] p